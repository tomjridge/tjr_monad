<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tjr_monad (tjr_monad.Tjr_monad)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">tjr_monad</a> &#x00BB; Tjr_monad</nav><h1>Module <code>Tjr_monad</code></h1><p>Generic monads</p><nav class="toc"><ul><li><a href="#monad-ops-type">Monad ops type</a></li><li><a href="#state-passing">State passing</a></li><li><a href="#with-state">With-state</a></li><li><a href="#iteration">Iteration</a></li></ul></nav></header><section><header><h3 id="monad-ops-type"><a href="#monad-ops-type" class="anchor"></a>Monad ops type</h3></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../Tjr_monad__/index.html#module-Monad_ops">Tjr_monad__.Monad_ops</a></code></span></summary><aside><p>Use a phantom type variable 't to specialize monad ops to a particular monad</p></aside><dl><dt class="spec type" id="type-m"><a href="#type-m" class="anchor"></a><code><span class="keyword">type</span> ('a, 't) m</code></dt><dt class="spec type" id="type-monad_ops"><a href="#type-monad_ops" class="anchor"></a><code><span class="keyword">type</span> 't monad_ops</code><code> = </code><code>{</code><table class="record"><tr id="type-monad_ops.return" class="anchored"><td class="def field"><a href="#type-monad_ops.return" class="anchor"></a><code>return : a. <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>;</code></td></tr><tr id="type-monad_ops.bind" class="anchored"><td class="def field"><a href="#type-monad_ops.bind" class="anchor"></a><code>bind : a b. (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>) <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>;</code></td></tr></table><code>}</code></dt></dl></details></div></div></div></section><section><header><h3 id="state-passing"><a href="#state-passing" class="anchor"></a>State passing</h3></header><dl><dt class="spec type" id="type-state_passing"><a href="#type-state_passing" class="anchor"></a><code><span class="keyword">type</span> 'a state_passing</code><code> = <span class="type-var">'a</span> <a href="State_passing/index.html#type-state_passing">State_passing.state_passing</a></code></dt></dl><aside><p>Conversions to and from function types</p></aside><dl><dt class="spec value" id="val-sp_to_fun"><a href="#val-sp_to_fun" class="anchor"></a><code><span class="keyword">val</span> sp_to_fun : (<span class="type-var">'a</span>, <span class="type-var">'b</span> <a href="State_passing/index.html#type-state_passing">State_passing.state_passing</a>) <a href="../Tjr_monad__/Monad_ops/index.html#type-m">Tjr_monad__.Monad_ops.m</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> * <span class="type-var">'b</span></code></dt><dt class="spec value" id="val-sp_of_fun"><a href="#val-sp_of_fun" class="anchor"></a><code><span class="keyword">val</span> sp_of_fun : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> * <span class="type-var">'a</span>) <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'a</span> <a href="State_passing/index.html#type-state_passing">State_passing.state_passing</a>) <a href="../Tjr_monad__/Monad_ops/index.html#type-m">Tjr_monad__.Monad_ops.m</a></code></dt></dl><dl><dt class="spec module" id="module-State_passing"><a href="#module-State_passing" class="anchor"></a><code><span class="keyword">module</span> <a href="State_passing/index.html">State_passing</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A generic state-passing monad.</p></dd></dl><dl><dt class="spec value" id="val-state_passing_monad_ops"><a href="#val-state_passing_monad_ops" class="anchor"></a><code><span class="keyword">val</span> state_passing_monad_ops : unit <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="State_passing/index.html#type-state_passing">State_passing.state_passing</a> <a href="../Tjr_monad__/Monad_ops/index.html#type-monad_ops">Tjr_monad__.Monad_ops.monad_ops</a></code></dt></dl></section><section><header><h3 id="with-state"><a href="#with-state" class="anchor"></a>With-state</h3></header><dl><dt class="spec type" id="type-with_state"><a href="#type-with_state" class="anchor"></a><code><span class="keyword">type</span> ('s, 't) with_state</code><code> = (<span class="type-var">'s</span>, <span class="type-var">'t</span>) <a href="../Tjr_monad__/With_state/index.html#type-with_state">Tjr_monad__.With_state.with_state</a></code><code> = </code><code>{</code><table class="record"><tr id="type-with_state.with_state" class="anchored"><td class="def field"><a href="#type-with_state.with_state" class="anchor"></a><code>with_state : a. (state:<span class="type-var">'s</span> <span>&#45;&gt;</span> set_state:(<span class="type-var">'s</span> <span>&#45;&gt;</span> (unit, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'t</span>) <a href="index.html#type-m">m</a>;</code></td></tr></table><code>}</code></dt><dd><pre>
type ('s,'t) with_state = ('s,'t) With_state.with_state = {
  with_state: 
    'a. 
      (state:'s -> 
       set_state:('s -> (unit,'t)m) -> 
       ('a,'t) m)
    -> ('a,'t)m
}
</pre> </dd></dl></section><section><header><h3 id="iteration"><a href="#iteration" class="anchor"></a>Iteration</h3></header><dl><dt class="spec value" id="val-iter_m"><a href="#val-iter_m" class="anchor"></a><code><span class="keyword">val</span> iter_m : monad_ops:<span class="type-var">'a</span> <a href="index.html#type-monad_ops">monad_ops</a> <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span> option, <span class="type-var">'a</span>) <a href="index.html#type-m">m</a>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'a</span>) <a href="index.html#type-m">m</a></code></dt></dl></section></div></body></html>